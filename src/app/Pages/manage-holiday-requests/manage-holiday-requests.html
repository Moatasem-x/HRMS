<div class="manage-holiday-container">
  <div class="form-card">
    <div class="form-header">
      <h1 class="form-title">
        <i class="bi bi-clipboard-check"></i>
        Manage Holiday Requests
      </h1>
      <p class="form-subtitle">Review, approve, or deny employee holiday requests</p>
    </div>
    <div class="filter-row">
      <label class="filter-label"><i class="bi bi-funnel"></i> Filter by status:</label>
      <div class="btn-group">
        <button class="btn btn-outline-primary" [class.active]="filter==='all'" (click)="setFilter('all')">All</button>
        <button class="btn btn-outline-warning" [class.active]="filter==='pending'" (click)="setFilter('pending')">Pending</button>
        <button class="btn btn-outline-success" [class.active]="filter==='approved'" (click)="setFilter('approved')">Approved</button>
        <button class="btn btn-outline-danger" [class.active]="filter==='rejected'" (click)="setFilter('rejected')">Rejected</button>
      </div>
    </div>
  
    @if (filteredRequests.length === 0) {
      <div class="no-requests-row"><i class="bi bi-inbox"></i> No requests found for this filter.</div>
    }
    @for (req of filteredRequests; track req.id) {
      <div class="request-card row align-items-center">
        <div class="col-md-2 col-6"><span class="label">Employee:</span> <span class="value">{{ req.employeeName }}</span></div>
        <div class="col-md-2 col-6"><span class="label">Type:</span> <span class="value">{{ req.leaveTypeName }}</span></div>
        <div class="col-md-2 col-6"><span class="label">Start:</span> <span class="value">{{ req.startDate }}</span></div>
        <div class="col-md-2 col-6"><span class="label">End:</span> <span class="value">{{ req.endDate }}</span></div>
        <div class="col-md-2 col-6"><span class="label">Requested:</span> <span class="value">{{ req.requestedAt }}</span></div>
        <div class="col-md-2 col-6"><span class="label">Status:</span> <span class="badge" [ngClass]="getBadgeClass(req.status)">{{ req.status }}</span></div>
        <div class="col-12 mt-2"><span class="label">Reason:</span> <span class="value">{{ req.reason }}</span></div>
        @if (req.status?.toLowerCase() === 'pending') {
          <div class="col-12 action-row">
            <button class="btn btn-success btn-sm" (click)="takeAction(req, 'approved')">
              <i class="bi bi-check-circle"></i> Approve
            </button>
            <button class="btn btn-danger btn-sm" (click)="takeAction(req, 'rejected')">
              <i class="bi bi-x-circle"></i> Deny
            </button>
          </div>
        }
      </div>
    }
    
  </div>
</div>
